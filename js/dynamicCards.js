document.addEventListener("DOMContentLoaded", function () {
    const imgFolder = "assets/img/";
    const products = [
        { 
            id: 1, name: "Llavero Dunalastair", img: "dunalastair.jpeg", price: 2000,
            formattedPrice: "$2.000", category: "Colegio", description: "Llavero personalizado con el escudo del Colegio Dunalastair. Ideal para estudiantes y exalumnos.",
            stockAvailability: true, rating: 5, featured: false, discount: null
        },
        { 
            id: 2, name: "Llavero Lincoln College", img: "lincoln_college.png", price: 2000,
            formattedPrice: "$2.000", category: "Colegio", description: "Llavero con el logo de Lincoln College. Ideal para estudiantes y exalumnos.",
            stockAvailability: true, rating: 5, featured: false, discount: null
        },
        {
            id: 3,  
            name: "Llavero Colegio Palmares", img: "palmares.jpeg", price: 2000,
            formattedPrice: "$2.000", category: "Colegio", description: "Llavero con el logo del colegio Palmares. Ideal para estudiantes y exalumnos.", 
            stockAvailability: true, featured: true, discount: null
        },
        { 
            id: 4, 
            name: "Llavero Colegio Pumahue", img: "pumahue.jpeg", price: 2000, 
            formattedPrice: "$2.000", category: "Colegio", description: "Llavero con el logo del colegio Pumahue. Ideal para estudiantes y exalumnos.", 
            stockAvailability: true, featured: true, discount: null
        },
        { 
            id: 5, 
            name: "Llavero Weston Academy", img: "weston_academy.jpeg", price: 2000, 
            formattedPrice: "$2.000", category: "Colegio", description: "Llavero con el logo del colegio Weston Academy. Ideal para estudiantes y exalumnos.", 
            stockAvailability: true, featured: true, discount: null
        },
        { 
            id: 6, name: "Iron Man", img: "iron_man.png", price: 65000,
            formattedPrice: "$65.000", category: "figura", description: "Figura de Iron Man de alta calidad. Dise√±o detallado y acabado perfecto.",
            stockAvailability: true, featured: true, discount: null
        },
        { 
            id: 7, name: "Abecedario Infantil", img: "abecedario.jpeg", price: 12000,
            formattedPrice: "$12.000", category: "Colegio", description: "Ayuda a tu hijo/a con este lindo Abecedario.",
            stockAvailability: true, featured: true, discount: null
        },
        { 
            id: 8, name: "Regla 30cms", img: "regla_30_cms.jpeg", price: 1500,
            formattedPrice: "$1.500", category: "Colegio", description: "Regla 30cms con letras y dise√±os",
            stockAvailability: true, featured: true, discount: null
        },
        { 
            id: 9, name: "Transportador 180¬∞", img: "transportador_180.jpeg", price: 1500,
            formattedPrice: "$1.500", category: "Colegio", description: "Transportador 180¬∞ con guia para diagramar angulos.",
            stockAvailability: true, featured: true, discount: null
        },
        { 
            id: 10, name: "Perrito Completero", img: "perro_completero.jpeg", price: 3500,
            formattedPrice: "$3.500", category: "Hogar", description: "Hermoso Perrito Completero",
            stockAvailability: true, featured: true, discount: null
        },
        { 
            id: 11, name: "Clip para cerrar bolsas", img: "mc_donald_clip.webp", price: 12000,
            formattedPrice: "$12.000", category: "Hogar", description: "Si no sabes como cerrar tus bolsas de papas fritas una vez abiertas, esta es una excelente opcion para ti. Incluye 6 clips dise√±o de papas fritas y contenedor para su guardado",
            stockAvailability: true, featured: true, discount: null
        },
        { 
            id: 12, name: "Llavero Escuela Santa Teresa de Avila", img: "escuela_santa_teresa_de_avila.png", price: 2000,
            formattedPrice: "$2.000", category: "Colegio", description: "Llavero personalizado con el escudo de la Escuela Santa Teresa de Avila.",
            stockAvailability: true, rating: 5, featured: false, discount: null
        },
        { 
            id: 13, name: "Placa identificaci√≥n de Gatitos. ", img: "placa_gatitos.png", price: 1000,
            formattedPrice: "$1.000", category: "mascotas", description: "Llavero personalizado con el nombre de tu gatito",
            stockAvailability: true, rating: 5, featured: false, discount: null
        },
        { 
            id: 14, name: "Placa identificaci√≥n de Perritos. ", img: "placa_perritos.png", price: 1000,
            formattedPrice: "$1.000", category: "mascotas", description: "Llavero personalizado con el nombre de tu perrito",
            stockAvailability: true, rating: 5, featured: false, discount: null
        },
        { 
            id: 15, name: "Porta credencial Minecraft ", img: "minecraft_card_id.webp", price: 2500,
            formattedPrice: "$2.500", category: "card_id", description: "Entretenido porta credencial del famoso juego Minecraft",
            stockAvailability: true, rating: 5, featured: false, discount: null
        },
        { 
            id: 16, name: "Porta credencial Brawl Stars ", img: "brawl_stars_card_id.png", price: 2500,
            formattedPrice: "$2.500", category: "card_id", description: "Entretenido porta credencial del famoso juego Brawl Stars",
            stockAvailability: true, rating: 5, featured: false, discount: null
        },
        { 
            id: 17, name: "Tabla de multiplicar", img: "tabla_multiplicar.webp", price: 6000,
            formattedPrice: "$6.000", category: "Colegio", description: "si estas comenzando con las tablas de multiplicar esta es ideal para ayudar en el proceso.",
            stockAvailability: true, rating: 5, featured: false, discount: null
        },
        { 
            id: 18, name: "Porta credencial Stitch", img: "stitch.png", price: 2500,
            formattedPrice: "$2.500", category: "card_id", description: "Entretenido porta credencial del famoso personaje de disney Stitch",
            stockAvailability: true, rating: 5, featured: false, discount: null
        },
        { 
            id: 19, name: "Porta credencial Pok√©mon", img: "pokemon_card_id.png", price: 2500,
            formattedPrice: "$2.500", category: "card_id", description: "Entretenido porta credencial de la famosa seria de Pok√©mon",
            stockAvailability: true, rating: 5, featured: false, discount: null
        },
        { 
            id: 20, name: "Porta credencial Minions", img: "card_id_minions.png", price: 2500,
            formattedPrice: "$2.500", category: "card_id", description: "Entretenido porta credencial de los queridos personajes de los minions",
            stockAvailability: true, rating: 5, featured: false, discount: null
        },
        { 
            id: 21,
            name: "Contenedor Apilable para Huevos ‚Äì ¬°Ahorra espacio y gana orden!",
            img: "contenedor_huevos_apilable.webp",
            price: 4500,
            formattedPrice: "$4.500",
            category: "Hogar",
            description: "üì¶ Capacidad de cada contedor para 10 huevos\n‚úÖ Dise√±o apilable y compacto\n‚úÖ Ideal para el refrigerador\n‚úÖ Pr√°ctico, limpio y duradero.",
            stockAvailability: true,
            featured: true,
            discount: null
        },
        {
            id: 22,
            name: "Huevo Conejito Decorativo ‚Äì Sorpresas de Pascua",
            img: "conejito.webp",
            price: 2000,
            formattedPrice: "$2.000",
            category: "pascuas",
            description: "üéÅ ¬°Haz m√°gica esta Pascua!\nUn adorable huevo con orejitas de conejo, ideal para esconder dulces, monedas o peque√±as sorpresas. Perfecto para b√∫squedas de Pascua, decorar tu hogar o sorprender a alguien especial.\n\nüê£ Caracter√≠sticas destacadas:\n‚úÖ Dise√±o divertido y colorido\n‚úÖ Se abre en dos partes para esconder tesoros\n‚úÖ Ideal para ni√±os y decoraciones tem√°ticas\n‚úÖ Reutilizable a√±o tras a√±o\n‚úÖ Tama√±o compacto y f√°cil de manipular\n\nüí° ¬°Comb√≠nalo con m√°s colores para una b√∫squeda inolvidable!",
            stockAvailability: true,
            featured: true,
            discount: null
          },
          {
            id: 23,
            name: "Set de 3 Conejitos Decorativos ‚Äì Estilo y ternura en Pascua",
            img: "conejito_2.webp",
            price: 1000,
            formattedPrice: "$1.000",
            category: "pascuas",
            description: "üê∞ Dale un toque adorable a tus espacios con este set de conejitos decorativos en tonos pastel. Inspirados en la dulzura de la Pascua, su dise√±o en espiral agrega un toque elegante y moderno.\n\nüé® Colores suaves y combinables\nüåÄ Dise√±o espiral √∫nico y llamativo\nüå∏ Perfectos para centros de mesa, repisas o regalos\nüì¶ Incluye m√∫ltiples tama√±os para mayor versatilidad\n\nDecora con encanto y estilo, ¬°haz que tu hogar brille esta temporada!",
            stockAvailability: true,
            featured: false,
            discount: null
          },
          {
            id: 24,
            name: "Easter Kinder Bunny ‚Äì Guarda tu Kinder Sorpresa con estilo",
            img: "conejito_4.webp",
            price: 1500,
            formattedPrice: "$1.500",
            category: "pascuas",
            description: "üê∞ Dise√±o encantador en forma de conejito\n‚úÖ Ideal para b√∫squedas de huevos o regalos personalizados\n‚úÖ Reutilizable y perfecto para decorar\nü•ö Tama√±o justo para huevos de chocolate tipo Kinder\n\n¬°Haz que cada descubrimiento sea a√∫n m√°s especial!",
            stockAvailability: true,
            featured: true,
            discount: null
          },
          {
            id: 25,
            name: "Easter Kinder Bunny 2‚Äì Guarda tu Kinder Sorpresa con estilo",
            img: "conejito_3.webp",
            price: 2000,
            formattedPrice: "$2.000",
            category: "pascuas",
            description: "üê∞ Dise√±o encantador en forma de conejito\n‚úÖ Ideal para b√∫squedas de huevos o regalos personalizados\n‚úÖ Reutilizable y perfecto para decorar\nü•ö Tama√±o justo para huevos de chocolate tipo Kinder\n\n¬°Haz que cada descubrimiento sea a√∫n m√°s especial!",
            stockAvailability: true,
            featured: true,
            discount: null
          },
          {
            id: 26,
            name: "Huevito Naruto ‚Äì ¬°El ninja m√°s kawaii de la Pascua!",
            img: "huevito_naruto.webp",
            price: 3900,
            formattedPrice: "$3.900",
            category: "pascuas",
            description: "üç•ü•ö ‚úÖ Dise√±o inspirado en Naruto Uzumaki\n‚úÖ Ideal para esconder dulces, sorpresas o regalos\n‚úÖ ¬°Perfecto para decorar o regalar a fans del anime!\n‚úÖ Reutilizable y resistente\n\n¬°Convi√©rtete en el Hokage de la b√∫squeda de huevos esta Pascua!",
            stockAvailability: true,
            featured: true,
            discount: null
          },
          {
            id: 27,
            name: "Huevito Minecraft ‚Äì El tesoro pixelado de Pascua",
            img: "huevito_minecraft.webp",
            price: 3500,
            formattedPrice: "$3.500",
            category: "pascuas",
            description: "üü©‚õèÔ∏è ¬°Este huevito es un verdadero bloque de sorpresas! Inspirado en el mundo de Minecraft, es ideal para esconder dulces o regalar a los fans del juego.\n\n‚úÖ Dise√±o c√∫bico al estilo pixel art\n‚úÖ Perfecto para esconder huevos sorpresa o peque√±os regalos\n‚úÖ Impreso en 3D con detalles en cada bloque\n‚úÖ ¬°Un must-have para los gamers esta Pascua!\n\n¬°Haz que tu b√∫squeda de huevos sea √©pica con este huevito de Minecraft!",
            stockAvailability: true,
            featured: true,
            discount: null
          },
          {
            id: 28,
            name: "Huevitos Yoshi ‚Äì ¬°Directo del Reino Champi√±√≥n!",
            img: "Yoshi.webp",
            price: 3500,
            formattedPrice: "$3.500",
            category: "pascuas",
            description: "‚úÖ Disponible en varios colores: verde, rojo, p√∫rpura y m√°s\n‚úÖ Impresi√≥n 3D de alta calidad con acabado suave\n‚úÖ Ideal para regalos, decoraciones o esconder sorpresas\n‚úÖ ¬°Un must para fans de Mario y Yoshi!\n\n¬°Atr√©vete a coleccionarlos todos y haz de tu Pascua una aventura pixelada!",
            stockAvailability: true,
            featured: false,
            discount: null
          },
          {
            id: 29,
            name: "Conejito Kinder Sorpresa ‚Äì Soporte 3D para tu huevito",
            img: "conejito_kinder_sorpresa.webp",
            price: 1500,
            formattedPrice: "$1.500",
            category: "pascuas",
            description: "‚úÖ Compatible con huevos tipo Kinder Sorpresa\n‚úÖ Dise√±o en 3D tierno y funcional\n‚úÖ Ideal para centros de mesa o regalos personalizados\n‚úÖ ¬°Una combinaci√≥n perfecta entre ternura y chocolate!\n\n¬°Llen√° tu Pascua de dulzura y estilo con este conejito!",
            stockAvailability: true,
            featured: false,
            discount: null
          },
          {
            id: 30,
            name: "Decoraci√≥n Happy Easter ‚Äì Ornamento Pascua",
            img: "happy_easter_decoration.webp",
            price: 2000,
            formattedPrice: "$2.000",
            category: "pascuas",
            description: "‚ú®ü™∫ Esta decoraci√≥n 'Happy Easter' es ideal para agregar un toque elegante y festivo a tus celebraciones de Pascua. Con un dise√±o limpio y orejitas de conejo asomando por detr√°s, ¬°es imposible no amarla!\n\nüìè Medidas: 10.7 cm x 5.2 cm x 1.25 cm\n‚úÖ Perfecta para centros de mesa o repisas\n‚úÖ Impresa en 3D con materiales de alta calidad\n‚úÖ Estilo minimalista con detalles encantadores\n\n¬°Decor√° tu hogar con esp√≠ritu pascuero y mucho estilo!",
            stockAvailability: true,
            featured: false,
            discount: null
          },
          {
            id: 31,
            name: "Topper Cake Happy Easter",
            img: "toper_cake_1.webp",
            price: 1000,
            formattedPrice: "$1.000",
            category: "pascuas",
            description: "Ideal para decoraci√≥n de tortas de Pascua.",
            stockAvailability: true,
            featured: false,
            discount: null
          },
          {
            id: 32,
            name: "Topper Cake Happy Easter",
            img: "toper_cake_2.webp",
            price: 1000,
            formattedPrice: "$1.000",
            category: "pascuas",
            description: "Ideal para decoraci√≥n de tortas de Pascua.",
            stockAvailability: true,
            featured: false,
            discount: null
          },
          {
            id: 33,
            name: "Topper Cake Happy Easter",
            img: "toper_cake_3.webp",
            price: 1000,
            formattedPrice: "$1.000",
            category: "pascuas",
            description: "Ideal para decoraci√≥n de tortas de Pascua.",
            stockAvailability: true,
            featured: false,
            discount: null
          },
          {
            id: 34,
            name: "Topper Cake Happy Easter",
            img: "toper_cake_4.webp",
            price: 1000,
            formattedPrice: "$1.000",
            category: "pascuas",
            description: "Ideal para decoraci√≥n de tortas de Pascua.",
            stockAvailability: true,
            featured: false,
            discount: null
          },
          {
            id: 35,
            name: "Topper Cake Happy Easter",
            img: "toper_cake_5.webp",
            price: 1000,
            formattedPrice: "$1.000",
            category: "pascuas",
            description: "Ideal para decoraci√≥n de tortas de Pascua.",
            stockAvailability: true,
            featured: false,
            discount: null
          },
    ];

    
    
    

    const container = document.getElementById("productContainer");
    const noResults = document.getElementById("no-results");
    const filterCategory = document.getElementById("filter-category");
    const filterSort = document.getElementById("filter-sort");

    function filterAndSortProducts() {
        let filteredProducts = [...products];

        // Aplicar filtrado por categor√≠a
        const selectedCategory = filterCategory.value;
        if (selectedCategory !== "all") {
            filteredProducts = filteredProducts.filter(product => product.category === selectedCategory);
        }

        // Aplicar ordenamiento
        const selectedSort = filterSort.value;
        if (selectedSort === "price-asc") {
            filteredProducts.sort((a, b) => a.price - b.price);
        } else if (selectedSort === "price-desc") {
            filteredProducts.sort((a, b) => b.price - a.price);
        } else if (selectedSort === "name-asc") {
            filteredProducts.sort((a, b) => a.name.localeCompare(b.name));
        } else if (selectedSort === "name-desc") {
            filteredProducts.sort((a, b) => b.name.localeCompare(a.name));
        }

        renderProducts(filteredProducts);
    }

    function renderProducts(productsToRender) {
        container.innerHTML = '';
        if (productsToRender.length === 0) {
            noResults.classList.remove('d-none');
        } else {
            noResults.classList.add('d-none');
            productsToRender.forEach(product => {
                const formattedDescription = product.description.replace(/\n/g, '<br>');
                const productCard = document.createElement("div");
                productCard.classList.add("col-lg-4", "col-md-6", "mb-4");
                productCard.innerHTML = `
                    <div class="card product-card">
                        <img src="${imgFolder}${product.img}" class="card-img-top product-image" alt="${product.name}">
                        <div class="card-body">
                            <h5 class="card-title">${product.name}</h5>
                            <p class="text-muted small">${formattedDescription}</p>
                            <p class="card-text"><strong>Precio: ${product.formattedPrice}</strong></p>
                        </div>
                    </div>
                `;
                container.appendChild(productCard);
            });
        }
    }

    // Escuchar cambios en los filtros
    filterCategory.addEventListener("change", filterAndSortProducts);
    filterSort.addEventListener("change", filterAndSortProducts);

    // Renderizar productos iniciales
    renderProducts(products);
});
